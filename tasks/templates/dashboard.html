{% extends 'base_content.html' %}
{% load static %}

{% block content %}

<style>
  body {
    background-image: url('{% static "images/background.jpeg" %}');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    margin: 0;
  }

  .container {
    padding-top: 50px;
  }
</style>>

<div class="container">
  <div class="row">
    <div class="col-12">
      <h1>Welcome to your dashboard {{ user.username }}</h1>
      <a href="{% url 'team_creation' %}">CREATE TEAM</a>
      <ul>
        {% for invite in invites %}
          {% if invite.invite_status == "S"%}
            <li>{{team_invites|get_item:invite.team_id}} Has invited you</li>
            <form method="post" action="{% url 'join_team' team_id=invite.team_id%}">
              {%csrf_token%}
              <input type="submit" value="Accept" class="btn btn-primary">
            </form>
            <form method="post" action="{% url 'decline_team' team_id=invite.team_id%}">
              {%csrf_token%}
              <input type="submit" value="Decline" class="btn btn-primary">
            </form>
          {% endif %}
        {% endfor %}
      </ul>

      <div class="card teams-card offset-sm-2 offset-md-4 offset-lg-7">
        <h1 class="teams-heading">Teams</h1>
        <p class="teams-text">View all your teams below:</p>
        <table>
          <thead>
            <tr>
              <th>Team Name</th>
              <th>Team Decription</th>
            </tr>
          </thead>
          <tbody>
            {% if teams %}
              {% for team in teams %}
                <tr>
                  <td><a href="{% url 'team_page' team_id=team.team_id %}">
                    <button> {{ team.team_name }}</button>
                  </a></td>
                  <td>{{ team.team_description }}</td>
                </tr>
              {% endfor %}
            {% endif %}
          </tbody>
        </table>
      </div>

      {% if teams %}
        {% for team in teams %}
        <a href="{% url 'team_page' team_id=team.team_id %}">
          <button> {{ team.team_name }}</button>
        </a>
        {% endfor %}
      {% endif %}
      {% if tasks %}
        {% for task in tasks %}
          <p>{{ task.title }}</p>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}